# start `default` server block (v20180531)
# change `hostname.example.com`, `192.0.2.1` and `2001:db8::`, replace `:` in log file names with `_`.
server {#IPv4 and IPv6 hostname, http, no 301 redirect
        access_log /var/log/nginx/hostname.example.com.access.log ipscrubbed;
        add_header Content-Security-Policy "connect-src 'self'; default-src 'self'; font-src 'self'; img-src 'self'; media-src 'self'; object-src 'none'; script-src 'none'; style-src 'self';";
        add_header Referrer-Policy strict-origin;
        add_header X-Content-Type-Options nosniff;
        add_header X-Frame-Options SAMEORIGIN;
        add_header X-XSS-Protection "1; mode=block";
        charset utf-8;
        client_max_body_size 128M;
        error_log /var/log/nginx/hostname.example.com.error.log crit;
        gzip on;
        gzip_vary on;
        gzip_proxied any;
        gzip_comp_level 6;
        gzip_types text/plain text/css text/xml application/json application/javascript application/xml+rss application/atom+xml image/svg+xml;
        if ($request_method !~ ^(GET|HEAD|POST)$ )
          {
            return 405;
          }
        index index.html index.php;
        listen *:80;
        #FORCESSL#return 301 https://$host$request_uri;
        root /var/www/html;
        server_name hostname.example.com;
        location ~ /.well-known {
                allow all;
                default_type "text/plain";
        }
        location / {
                index index.html index.php;
                try_files $uri $uri/ /index.php?$args;
        }
        location = /favicon.ico {
                log_not_found off;
        }
        location ~ /\. {
                deny all;
        }
        location ~ \.php$ {
                fastcgi_split_path_info ^(.+\.php)(/.+)$;
                fastcgi_pass unix:/var/run/php/php7.2-fpm.sock;
                fastcgi_index index.php;
                fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
                include fastcgi_params;
                try_files $uri =404;
        }
}

server {#IPv4 and IPv6 hostname, https, PHP fastcgi, check https://cipherli.st for latest `add_header` stuff
        #HTTPS443#access_log /var/log/nginx/hostname.example.com.access.log ipscrubbed;
        #HTTPS443#add_header Content-Security-Policy "default-src 'self'; font-src 'self'; img-src 'self'; media-src 'self'; object-src 'none'; script-src 'self'; style-src 'self';";
        #HTTPS443#add_header Referrer-Policy strict-origin;
        #HTTPS443#add_header Strict-Transport-Security "max-age=63072000; includeSubDomains; preload";
        #HTTPS443#add_header X-Content-Type-Options nosniff;
        #HTTPS443#add_header X-Frame-Options DENY;
        #HTTPS443#add_header X-XSS-Protection "1; mode=block";
        #HTTPS443#charset utf-8;
        #HTTPS443#client_max_body_size 128M;
        #HTTPS443#error_log /var/log/nginx/hostname.example.com.error.log crit;
        #HTTPS443#gzip on;
        #HTTPS443#gzip_vary on;
        #HTTPS443#gzip_proxied any;
        #HTTPS443#gzip_comp_level 6;
        #HTTPS443#gzip_types text/plain text/css text/xml application/json application/javascript application/xml+rss application/atom+xml image/svg+xml;
        #HTTPS443#if ($request_method !~ ^(GET|HEAD|POST)$ )
        #HTTPS443#  {
        #HTTPS443#    return 405;
        #HTTPS443#  }
        #HTTPS443#index index.html index.php;
        #HTTPS443#listen *:443 default_server http2 ssl;
        #HTTPS443#root /var/www/html;
        #HTTPS443#server_name hostname.example.com;
        #HTTPS443#ssl_certificate /etc/letsencrypt/live/hostname.example.com/fullchain.pem;
        #HTTPS443#ssl_certificate_key /etc/letsencrypt/live/hostname.example.com/privkey.pem;
        #HTTPS443#ssl_stapling on;
        #HTTPS443#ssl_stapling_verify on;
        #HTTPS443#ssl_trusted_certificate /etc/letsencrypt/live/hostname.example.com/fullchain.pem;
        #HTTPS443#location ~ /.well-known {
        #HTTPS443#        allow all;
        #HTTPS443#        default_type "text/plain";
        #HTTPS443#}
        #HTTPS443#location / {
        #HTTPS443#        index index.html index.php;
        #HTTPS443#        try_files $uri $uri/ /index.php?$args;
        #HTTPS443#}
        #HTTPS443#location = /favicon.ico {
        #HTTPS443#       log_not_found off;
        #HTTPS443#}
        #HTTPS443#location ~ /\. {
        #HTTPS443#        deny all;
        #HTTPS443#}
        #HTTPS443##PHP7#location ~ \.php$ {
                #HTTPS443##PHP7#try_files $uri =404;
                #HTTPS443##PHP7#fastcgi_split_path_info ^(.+\.php)(/.+)$;
                #HTTPS443##PHP7#fastcgi_pass unix:/var/run/php/php7.2-fpm.sock;
                #HTTPS443##PHP7#fastcgi_index index.php;
                #HTTPS443##PHP7#fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
                #HTTPS443##PHP7#include fastcgi_params;
        #HTTPS443##PHP7#}
}
server {#IPv4 address
        access_log /var/log/nginx/192.0.2.1.access.log ipscrubbed;
        add_header Content-Security-Policy "default-src 'self'; font-src 'self'; img-src 'self'; media-src 'self'; object-src 'none'; script-src 'self'; style-src 'self';";
        add_header Referrer-Policy strict-origin;
        add_header X-Content-Type-Options nosniff;
        add_header X-Frame-Options SAMEORIGIN;
        add_header X-XSS-Protection "1; mode=block";
        charset utf-8;
        client_max_body_size 128M;
        error_log /var/log/nginx/192.0.2.1.error.log crit;
        gzip on;
        gzip_vary on;
        gzip_proxied any;
        gzip_comp_level 6;
        gzip_types text/plain text/css text/xml application/json application/javascript application/xml+rss application/atom+xml image/svg+xml;
        if ($request_method !~ ^(GET|HEAD|POST)$ )
          {
            return 405;
          }
        index index.html index.php;
        listen 192.0.2.1:80;
        root /var/www/html;
        server_name 192.0.2.1;
        location ~ /.well-known {
                allow all;
                default_type "text/plain";
        }
        location / {
                index index.html index.php;
                try_files $uri $uri/ /index.php?$args;
        }
        location = /favicon.ico {
                log_not_found off;
        }
        location ~ /\. {
                deny all;
        }
        #PHP7#location ~ \.php$ {
                #PHP7#fastcgi_split_path_info ^(.+\.php)(/.+)$;
                #PHP7#fastcgi_pass unix:/var/run/php/php7.2-fpm.sock;
                #PHP7#fastcgi_index index.php;
                #PHP7#fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
                #PHP7#include fastcgi_params;
                #PHP7#try_files $uri =404;
        #PHP7#}
}
server {#IPv6 address
        access_log /var/log/nginx/2001:db8::.access.log ipscrubbed;
        add_header Content-Security-Policy "default-src 'self'; font-src 'self'; img-src 'self'; media-src 'self'; object-src 'none'; script-src 'self'; style-src 'self';";
        add_header Referrer-Policy strict-origin;
        add_header X-Content-Type-Options nosniff;
        add_header X-Frame-Options SAMEORIGIN;
        add_header X-XSS-Protection "1; mode=block";
        charset utf-8;
        client_max_body_size 128M;
        gzip on;
        gzip_vary on;
        gzip_proxied any;
        gzip_comp_level 6;
        gzip_types text/plain text/css text/xml application/json application/javascript application/xml+rss application/atom+xml image/svg+xml;
        error_log /var/log/nginx/2001:db8::.error.log crit;
        if ($request_method !~ ^(GET|HEAD|POST)$ )
          {
            return 405;
          }
        index index.html index.php;
        listen [2001:db8::]:80;
        root /var/www/html;
        server_name 2001:db8::;
        location ~ /.well-known {
                allow all;
                default_type "text/plain";
        }
        location / {
                index index.html index.php;
                try_files $uri $uri/ /index.php?$args;
        }
        location = /favicon.ico {
                log_not_found off;
        }
        location ~ /\. {
                deny all;
        }
        #PHP7#location ~ \.php$ {
                #PHP7#fastcgi_split_path_info ^(.+\.php)(/.+)$;
                #PHP7#fastcgi_pass unix:/var/run/php/php7.2-fpm.sock;
                #PHP7#fastcgi_index index.php;
                #PHP7#fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
                #PHP7#include fastcgi_params;
                #PHP7#try_files $uri =404;
        #PHP7#}
}
#end `default` server block
